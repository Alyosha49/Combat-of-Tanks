<!DOCTYPE html>
<html>
<head>
    <link rel = "icon" href = "Combat%20of%20tanks%20logo.png">
    <title>Combat of Tanks</title>
    <style>
        body {
            background: #ffffff;
            font-family: sans-serif
        }
        h1 {
            padding: 20px;
            color: #0c77ee;
            padding-left: 350px
        }
        h2 {
            font-family: times;
            font-size: 19px;
            padding: 20px;
        }
        img {
            top: 800 / 2;
            left: 400 * 2;
        }
    </style>
</head>
<body>
<img width = 200 height = 150 src = "Б.jpg">
<script src = "jquery-2.1.0.js"></script>
<script>
    var Rocket = function (x, y) {
        this.x = x
        this.y = y
    }
    Rocket.prototype.draw = function () {
        var rocketHtml = "<img src = 'rocket.png'>"
        this.rocketElement = $(rocketHtml)
        this.rocketElement.css({
            position: "absolute",
            top: this.y,
            left: this.x,
            width: 60,
            height: 20
        })
        $("body").append(this.rocketElement);

    }
    Rocket.prototype.fire = function(ff) {
        if (ff === "fire"){
            //setInterval(function() {            
            this.x += 5
            this.rocketElement.css({
                position: "absolute",
                top: this.y,
                left: this.x
            })
            //}, 10
            //)
        }
    }
    $("body").keydown(function(event){
        var notfire = fire[event.keyCode];
        rocket1.fire(notfire)
    })
    
    var Tank = function(x, y, url){
        this.x = x
        this.y = y
        this.url = url
    };
    Tank.prototype.draw = function (){
        var tankHtml = "<img width = '300' height = '150' src = '" + this.url + "'>"
        this.tankElement = $(tankHtml);
        this.tankElement.css({
            position: "absolute",
            left: this.x,
            top: this.y
        })
        $("body").append(this.tankElement);
    };
    Tank.prototype.moveTop = function () {
        this.y -= 1
        this.tankElement.css({
            top: this.y,
            left: this.x
        })
    };
    Tank.prototype.moveDown = function(){
        this.y += 1
        this.tankElement.css({
            top: this.y,
            left: this.x
        })
    }
    Tank.prototype.setDirection = function(direction){
        if (direction === "Up"){
            this.moveTop()
        } else if (direction === "Down"){
            this.moveDown()
        } else if (direction === "Up2"){
            this.moveTop()
        } else if (direction === "Down2"){
            this.moveDown()
        }
    }
    var tank1 = new Tank(400, 10, "tank.png")
    var tank2 = new Tank(400 + 500, 10, "Танк.jpg");
    var rocket1 = new Rocket(400+220, 65);
    var fire =  {
        32: "fire"
    }
    var keyActions = {
        87: "Up",
        83: "Down"
    }
    var keyActions2 = {
        38: "Up2",
        40: "Down2"
        } 
        $("body").keydown(function (event) {
        var direction = keyActions[event.keyCode];
        tank1.setDirection(direction)
    });
    $("body").keydown(function (event) {
        var direction2 = keyActions2[event.keyCode];
        tank2.setDirection(direction2)
    });
    setInterval(function (){
    tank1.draw();
    tank2.draw();
    rocket1.draw();
    }, 10)
    if (tank1.x < 1){direction = "Down"
    } else if (tank1 > 500){direction = "Up"}
    function runOnKeys(func) {
        var codes = [].slice.call(arguments, 1);

        var pressed = {};

        document.onkeydown = function(e) {
          e = e || window.event;

          pressed[e.keyCode] = true;

          for (var i = 0; i < codes.length; i++) { // проверить, все ли клавиши нажаты
            if (!pressed[codes[i]]) {
              return;
            }
          }
          pressed = {};

          func();

        };

        document.onkeyup = function(e) {
          e = e || window.event;

          delete pressed[e.keyCode];
        };

      }

      runOnKeys(
        function() {
          tank1.setDirection("Down")
          tank2.setDirection("Up2")
        },
        "40".charCodeAt(0),
        "W".charCodeAt(0)
      );
      function runOnKeys(func) {
        var codes = [].slice.call(arguments, 1);

        var pressed = {};

        document.onkeydown = function(e) {
          e = e || window.event;

          pressed[e.keyCode] = true;

          for (var i = 0; i < codes.length; i++) { // проверить, все ли клавиши нажаты
            if (!pressed[codes[i]]) {
              return;
            }
          }
          pressed = {};

          func();

        };

        document.onkeyup = function(e) {
          e = e || window.event;

          delete pressed[e.keyCode];
        };

      }

      runOnKeys(
        function() {
          tank1.setDirection("Up")
          tank2.setDirection("Down2")
        },
        "38".charCodeAt(0),
        "S".charCodeAt(0)
      );
      function runOnKeys(func) {
        var codes = [].slice.call(arguments, 1);

        var pressed = {};

        document.onkeydown = function(e) {
          e = e || window.event;

          pressed[e.keyCode] = true;

          for (var i = 0; i < codes.length; i++) { // проверить, все ли клавиши нажаты
            if (!pressed[codes[i]]) {
              return;
            }
          }
          pressed = {};

          func();

        };

        document.onkeyup = function(e) {
          e = e || window.event;

          delete pressed[e.keyCode];
        };

      }

      runOnKeys(
        function() {
          tank1.setDirection("Up")
          tank2.setDirection("Up2")
        },
        "38".charCodeAt(0),
        "W".charCodeAt(0)
      );
      function runOnKeys(func) {
        var codes = [].slice.call(arguments, 1);

        var pressed = {};

        document.onkeydown = function(e) {
          e = e || window.event;

          pressed[e.keyCode] = true;

          for (var i = 0; i < codes.length; i++) { // проверить, все ли клавиши нажаты
            if (!pressed[codes[i]]) {
              return;
            }
          }
          pressed = {};

          func();

        };

        document.onkeyup = function(e) {
          e = e || window.event;

          delete pressed[e.keyCode];
        };

      }

      runOnKeys(
        function() {
          tank1.setDirection("Down")
          tank2.setDirection("Down2")
        },
        "40".charCodeAt(0),
        "S".charCodeAt(0)
      )
</script>
</body>
</html>